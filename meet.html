<!DOCTYPE html>
<html lang="en">

  <head>
    <link rel="stylesheet" type="text/css" href="./css/reset.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generation meet</title>
    <!-- Start of Async Drift Code -->
<script>
"use strict";

!function() {
  var t = window.driftt = window.drift = window.driftt || [];
  if (!t.init) {
    if (t.invoked) return void (window.console && console.error && console.error("Drift snippet included twice."));
    t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ],
    t.factory = function(e) {
      return function() {
        var n = Array.prototype.slice.call(arguments);
        return n.unshift(e), t.push(n), t;
      };
    }, t.methods.forEach(function(e) {
      t[e] = t.factory(e);
    }), t.load = function(t) {
      var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
      o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
      var i = document.getElementsByTagName("script")[0];
      i.parentNode.insertBefore(o, i);
    };
  }
}();
drift.SNIPPET_VERSION = '0.3.1';
drift.load('yrsfzd6yxitc');
</script>
<!-- End of Async Drift Code -->
  </head>

  <body>

    <nav id="navbar">
     <a href="index.html">Home</a>
     <a href="aboutus.html">About us</a>
    </nav>
  <div id="purple_bar"></div>
<br>

    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <br>

    <h2 id="meet_h2">Find your MeetUp</h2>
<br>

    <p id="intro">Enter your postcode below:<p>

    <input id="postcode" type="text" value="postcode" onfocus="if(this.value == 'postcode') { this.value = ''; }" />

    <button id="submit" onclick="setTimeout(loadThenScroll, 1000)">Submit</button>
    <!-- <a href="searchresults.html" target="_blank"></a> -->
    <!-- onclick="searchResults()" -->
    <div id="map" style="width:100%;height:400px;margin-bottom:60px;"></div>

    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 51.508742, lng: -0.120850},
          zoom: 11

        });
      }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA1vU6fA_pQqBzqcIN624qBgqHRROd_T1k&callback=initMap"
    async defer></script>


<!-- EVENTS -->

    <div id="events"></div>
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
    <script type="text/javascript">

    $( "#submit" ).click(function() {
      var zip = document.getElementById("postcode").value;
      var url = "https://api.meetup.com/2/concierge?key=153616cc411c2b2e41d2a351f18c&sign=true&photo-host=public&zip=" + zip;

      // To display results in a list
      $.get(url, function(response) {
        console.log(response);
        var upcomingEvents = response.results;
        var str = "<ul id='eventsList'><h3 id='search_results'>Search results for " + zip + ":</h3><br>"
        upcomingEvents.forEach(function(upcomingEvent) {
        str += "<li><h3 id='event_name'>" + upcomingEvent.name + "</h3><br>" + upcomingEvent.description + "<br>" + "<a href='" + upcomingEvent.event_url + "' target='_blank' id='event'>Visit event page</a>" + "<br>" + "</li>";
      });

      str += '</ul>';
      document.getElementById("events").innerHTML = str;
      })
    });

    function scrollWin() {
    window.scrollTo(0, 700);
    }

    function loadThenScroll() {
    scrollWin()
    }

    </script>

    <footer id="footer">
    <p>&copy;Generation Meet 2018</p>


   <script src="js/main.js"></script>

  </body>
  </html>
